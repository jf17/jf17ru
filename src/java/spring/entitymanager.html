<!DOCTYPE html>
<html lang="ru"><head>
<!-- author: Alexandrovich Alexey Borisovich aka JF17-->
<title> EntityManager - jf17.ru</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta http-equiv="Content-Language" content="ru">
<meta name="theme-color" content="#000000"/>
<meta name="Description" content="Author: Alexandrovich Alexey Borisovich aka JF17">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="https://jf17.ru/assets/main.css"> 
</head>
<body>

<!-- Heading -->
<header>
<div class="content">
<h1> <a href="https://jf17.ru/" >Главная</a></h1>
<h2> <a href="https://jf17.ru/java/index.html" >Java</a></h2>
<h3> <a href="https://jf17.ru/java/spring/index.html" >Spring</a></h3>
<hr />
</header>
                                
<!-- Heading -->
<section>
<font color="#ffa31a">	<h2> EntityManager</h2></font><br>
javax.persistence.EntityManager

<ul>
<li> <a href="#" target="_blank">find() или createQuery()</a> берёт сущность под свою опеку и переводит её в состояние «управляемая» (managed)</li>
<li> <a href="#" target="_blank">persist() </a> берёт сущность под свою опеку и переводит её в состояние «управляемая» (managed)</li>
<li> <a href="#" target="_blank">remove()</a> Удаляются сущность  «удалённая» (deleted)</li>
<li> <a href="#" target="_blank">detach()</a>  «отделённая» (detached) Отделённая сущность теряет связь с базой данных и изменения в ней в базу сами не попадают.</li>
<li> <a href="#" target="_blank">merge() </a>  применённый на отсоединённой сущности, либо копирует значение переданной сущности в уже существующую сущность с тем же значением поля @id, либо создаёт новую сущность этого типа и копирует данные в неё. В обоих случаях результат сохраняется в базу и из метода возвращается новая управляемая сущность. Старая при этом остаётся отсоединённой.</li>
<li> <a href="#" target="_blank">refresh()</a> перечитывает дынные управляемой сущности из базы, оставляя её при этом управляемой.</li>
</ul>

<p>@PersistenceContext<br>
<span class="codeclass">EntityManager</span> <span class="codeobject">entityManager</span>;</p>
<pre class="code"><code>
public void saveMovie() {
  <span class="codeobject">entityManager</span>.getTransaction().begin();
     
    Movie <span class="codeobject">movie</span> = new Movie();
    movie.setId(1L);
    movie.setMovieName("The Godfather");
    movie.setReleaseYear(1972);
    movie.setLanguage("English");
 
    entityManager<span class="codemethod">.persist</span>(<span class="codeobject">movie</span>);
    entityManager.getTransaction().commit();
    }
</code></pre>
<pre class="code"><code>
public Movie getMovie(Long movieId) {
    Movie movie = <span class="codeobject">entityManager</span>.find(Movie.class, new Long(movieId));
    <span class="codeobject">entityManager</span><span class="codemethod">.detach</span>(movie); <span class="codecomment">//  «отделённая» (detached). Отделённая сущность теряет связь с базой данных и изменения в ней в базу сами не попадают.</span>     
    <span class="codeoperator">return</span> movie;
}
</code></pre>
<section>

<!-- Полезные ссылки . -->
<div class="contentname">
<h4>Полезные ссылки:</h4>
</div>

<ul>
<li> <a href="https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html" target="_blank">Interface EntityManager</a> Java 7 EE</li>
</ul>
</section>



<footer>
<!-- работа с куки -->
<script type="text/javascript">
	var x = document.cookie;
	if(x=='size=150'){
	document.body.style.fontSize='150%';
	}
	</script>
</footer>
</div>
</div></section></div></body><!-- Footer --></html>